<html><head><link rel="import" href="../../../../bower_components/google-map/google-map.html"><link rel="import" href="../../../elements/my-meta.html"><link rel="import" href="../../../elements/base-class.html"></head><body><dom-module id="widget-map"><template><style>:host{display:block;width:100%;box-shadow:var(--paper-material-elevation-1_-_box-shadow);}#map{width:100%;height:430px;}</style><div><google-map id="map" fit-to-marker="" api-key="[[apiKey]]" draggable="true" styles="[[style]]" drag-events="" google-map-drag="onMapDragend"><template is="dom-repeat" items="{{markers}}"><google-map-marker slot="markers" icon="../../../images/marker_taxi.png" latitude="[[item.lat]]" longitude="[[item.lng]]"></google-map-marker></template></google-map></div></template><script>class WidgetMap extends BaseClass{static get is(){return"widget-map"}static get properties(){return{markers:{type:Array},apiKey:{type:String,value:function(){return localStorage.getItem("map")}},item:Object,style:{type:Array,value:function(){return mapStyle}}}}attached(){let widgetMap=this;this.$.map.dragEvents=!0/* ignoreName */ /* skipSlots */;this.$.map.addEventListener("google-map-dragend",function(e){let point=widgetMap.$.map.map.getCenter(),latLng={x:point.lng(),y:point.lat()};socket.emit("getDriversLocation",latLng,function(code,locations){widgetMap.set("markers",locations)})})}}customElements.define(WidgetMap.is,WidgetMap);</script></dom-module></body></html>